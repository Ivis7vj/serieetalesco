[{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\ActivityFeed.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\BannerActionModal.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  15 |\n  16 |             if (diffDays < 7) {\n> 17 |                 setIsLocked(true);\n     |                 ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  18 |                 setDaysRemaining(Math.ceil(7 - diffDays));\n  19 |             } else {\n  20 |                 setIsLocked(false);","line":17,"column":17,"nodeType":null,"endLine":17,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { MdLock, MdPhotoCamera } from 'react-icons/md';\r\nimport './BannerActionModal.css';\r\n\r\nconst BannerActionModal = ({ onClose, onSearch, lastUpdated }) => {\r\n    const [daysRemaining, setDaysRemaining] = useState(0);\r\n    const [isLocked, setIsLocked] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (lastUpdated) {\r\n            const lastDate = new Date(lastUpdated);\r\n            const now = new Date();\r\n            const diffTime = Math.abs(now - lastDate);\r\n            const diffDays = diffTime / (1000 * 60 * 60 * 24);\r\n\r\n            if (diffDays < 7) {\r\n                setIsLocked(true);\r\n                setDaysRemaining(Math.ceil(7 - diffDays));\r\n            } else {\r\n                setIsLocked(false);\r\n            }\r\n        } else {\r\n            setIsLocked(false);\r\n        }\r\n    }, [lastUpdated]);\r\n\r\n    return (\r\n        <div className=\"banner-action-modal-overlay\" onClick={onClose}>\r\n            <div className=\"banner-action-modal\" onClick={e => e.stopPropagation()}>\r\n                {isLocked ? (\r\n                    <>\r\n                        <div className=\"action-icon locked\">\r\n                            <MdLock size={40} />\r\n                        </div>\r\n                        <h3>Banner Locked</h3>\r\n                        <p>You can change your banner again in {daysRemaining} days.</p>\r\n                        <button className=\"action-btn primary\" onClick={onClose}>\r\n                            OK\r\n                        </button>\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"action-icon unlocked\">\r\n                            <MdPhotoCamera size={40} />\r\n                        </div>\r\n                        <h3>Change Profile Banner</h3>\r\n                        <p>You can update your profile banner now.</p>\r\n                        <button\r\n                            className=\"action-btn primary\"\r\n                            onClick={() => {\r\n                                onClose();\r\n                                onSearch();\r\n                            }}\r\n                        >\r\n                            Choose New Banner\r\n                        </button>\r\n                        <button className=\"action-btn secondary\" onClick={onClose}>\r\n                            Cancel\r\n                        </button>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BannerActionModal;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\BannerSearch.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'TMDB_API_KEY'. Either include it or remove the dependency array.","line":43,"column":8,"nodeType":"ArrayExpression","endLine":43,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [TMDB_API_KEY, query]","fix":{"range":[1575,1582],"text":"[TMDB_API_KEY, query]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { MdClose, MdSearch } from 'react-icons/md';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { getResolvedPosterUrl } from '../utils/globalPosterResolver';\r\nimport './BannerSearch.css';\r\n\r\nconst BannerSearch = ({ onClose, onSelectSeries }) => {\r\n    const [query, setQuery] = useState('');\r\n    const [results, setResults] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const inputRef = useRef(null);\r\n    const { globalPosters } = useAuth();\r\n\r\n    const TMDB_API_KEY = import.meta.env.VITE_TMDB_API_KEY || '05587a49bd4890a9630d6c0e544e0f6f';\r\n    const TMDB_BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\n    useEffect(() => {\r\n        if (inputRef.current) inputRef.current.focus();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchSearch = async () => {\r\n            if (!query.trim()) {\r\n                setResults([]);\r\n                return;\r\n            }\r\n            setLoading(true);\r\n            try {\r\n                const response = await fetch(`${TMDB_BASE_URL}/search/tv?api_key=${TMDB_API_KEY}&query=${encodeURIComponent(query)}`);\r\n                const data = await response.json();\r\n                setResults(data.results || []);\r\n            } catch (error) {\r\n                console.error(\"Search failed\", error);\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        const timeoutId = setTimeout(() => {\r\n            fetchSearch();\r\n        }, 500); // Debounce\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [query]);\r\n\r\n    return (\r\n        <div className=\"banner-search-overlay\">\r\n            <div className=\"banner-search-header\">\r\n                <button className=\"close-btn\" onClick={onClose}><MdClose size={24} /></button>\r\n                <div className=\"search-input-wrapper\">\r\n                    <MdSearch className=\"search-icon\" size={20} />\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        placeholder=\"Search series for banner\"\r\n                        value={query}\r\n                        onChange={(e) => setQuery(e.target.value)}\r\n                        className=\"banner-search-input\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"banner-search-results\">\r\n                {loading && <div className=\"loading-text\">Searching...</div>}\r\n\r\n                {!loading && query && results.length === 0 && (\r\n                    <div className=\"no-results\">No series found</div>\r\n                )}\r\n\r\n                <div className=\"results-grid\">\r\n                    {results.map(series => (\r\n                        <div key={series.id} className=\"result-card\" onClick={() => onSelectSeries(series)}>\r\n                            <img\r\n                                src={getResolvedPosterUrl(series.id, series.poster_path, globalPosters, 'w342')\r\n                                    || 'https://via.placeholder.com/154x231'}\r\n                                alt={series.name}\r\n                                className=\"result-poster\"\r\n                            />\r\n                            <div className=\"result-name\">{series.name}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BannerSearch;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\BannerSelection.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'diffDays' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":37,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"diffDays"},"fix":{"range":[1698,1759],"text":""},"desc":"Remove unused variable 'diffDays'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'TMDB_API_KEY'. Either include it or remove the dependency array.","line":70,"column":8,"nodeType":"ArrayExpression","endLine":70,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [TMDB_API_KEY, series]","fix":{"range":[3084,3092],"text":"[TMDB_API_KEY, series]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { MdArrowBack, MdLock } from 'react-icons/md';\r\nimport { db } from '../firebase-config';\r\nimport { doc, updateDoc, getDoc } from 'firebase/firestore';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNotification } from '../context/NotificationContext';\r\nimport './BannerSelection.css';\r\nimport PremiumLoader from '../components/PremiumLoader';\r\n\r\nconst BannerSelection = ({ series, onClose, onBack }) => {\r\n    const [backdrops, setBackdrops] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedBackdrop, setSelectedBackdrop] = useState(null);\r\n    const [saving, setSaving] = useState(false);\r\n    const [daysRemaining, setDaysRemaining] = useState(0);\r\n    const [canUpdate, setCanUpdate] = useState(true);\r\n    const [showConfirm, setShowConfirm] = useState(false);\r\n\r\n    const { currentUser } = useAuth();\r\n    const { alert } = useNotification();\r\n\r\n    const TMDB_API_KEY = import.meta.env.VITE_TMDB_API_KEY || '05587a49bd4890a9630d6c0e544e0f6f';\r\n    const TMDB_BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\n    // Check Limit on Mount\r\n    useEffect(() => {\r\n        const checkLimit = async () => {\r\n            if (!currentUser) return;\r\n            const userRef = doc(db, 'users', currentUser.uid);\r\n            const snap = await getDoc(userRef);\r\n            if (snap.exists()) {\r\n                const data = snap.data();\r\n                if (data.bannerUpdatedAt) {\r\n                    const lastUpdate = new Date(data.bannerUpdatedAt);\r\n                    const now = new Date();\r\n                    const diffTime = Math.abs(now - lastUpdate);\r\n                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                    // Wait, logic should be: if diff < 7, disable.\r\n                    // diffDays is purely difference. We need to check if 7 days PASSED.\r\n\r\n                    const daysPassed = (now - lastUpdate) / (1000 * 60 * 60 * 24);\r\n\r\n                    if (daysPassed < 7) {\r\n                        setCanUpdate(false);\r\n                        setDaysRemaining(Math.ceil(7 - daysPassed));\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        checkLimit();\r\n    }, [currentUser]);\r\n\r\n    // Fetch Backdrops\r\n    useEffect(() => {\r\n        const fetchImages = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const response = await fetch(`${TMDB_BASE_URL}/tv/${series.id}/images?api_key=${TMDB_API_KEY}`);\r\n                const data = await response.json();\r\n                // Filter for backdrops\r\n                const validBackdrops = (data.backdrops || []).filter(b => b.width > 1280); // Prefer High Res\r\n                // If no high res, take any\r\n                setBackdrops(validBackdrops.length > 0 ? validBackdrops : (data.backdrops || []));\r\n            } catch (error) {\r\n                console.error(\"Fetch images failed\", error);\r\n            }\r\n            setLoading(false);\r\n        };\r\n        if (series) fetchImages();\r\n    }, [series]);\r\n\r\n    const handleSaveClick = () => {\r\n        if (!canUpdate) {\r\n            alert(`You can change your banner again in ${daysRemaining} days.`, \"Weekly Limit Reached\");\r\n            return;\r\n        }\r\n        if (!selectedBackdrop) return;\r\n        setShowConfirm(true); // Open Confirmation Modal\r\n    };\r\n\r\n    const confirmSave = async () => {\r\n        setSaving(true);\r\n        try {\r\n            await updateDoc(doc(db, 'users', currentUser.uid), {\r\n                bannerSeriesId: series.id,\r\n                bannerBackdropPath: selectedBackdrop.file_path,\r\n                bannerUpdatedAt: new Date().toISOString()\r\n            });\r\n            setShowConfirm(false);\r\n            onClose();\r\n        } catch (error) {\r\n            console.error(\"Save failed\", error);\r\n            alert(\"Failed to set banner. Please try again.\", \"Error\");\r\n            setShowConfirm(false);\r\n        }\r\n        setSaving(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"banner-selection-overlay\">\r\n            <div className=\"selection-header\">\r\n                <button className=\"back-btn\" onClick={onBack}><MdArrowBack size={24} /></button>\r\n                <h3>Choose Banner for {series.name}</h3>\r\n            </div>\r\n\r\n            <div className=\"selection-content\">\r\n                {loading ? (\r\n                    <div style={{ position: 'relative', height: '300px' }}><PremiumLoader message=\"Loading backdrops...\" /></div>\r\n                ) : backdrops.length === 0 ? (\r\n                    <div className=\"no-results\">No backdrops available for this series.</div>\r\n                ) : (\r\n                    <div className=\"backdrop-list\">\r\n                        {backdrops.map(backdrop => (\r\n                            <div\r\n                                key={backdrop.file_path}\r\n                                className={`backdrop-item ${selectedBackdrop?.file_path === backdrop.file_path ? 'selected' : ''}`}\r\n                                onClick={() => setSelectedBackdrop(backdrop)}\r\n                            >\r\n                                <img\r\n                                    src={`https://image.tmdb.org/t/p/w780${backdrop.file_path}`}\r\n                                    alt=\"Banner Option\"\r\n                                    loading=\"lazy\"\r\n                                />\r\n                                {selectedBackdrop?.file_path === backdrop.file_path && (\r\n                                    <div className=\"selection-indicator\" />\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"selection-footer\">\r\n                {!canUpdate && (\r\n                    <div className=\"limit-warning\">\r\n                        <MdLock size={16} /> Update available in {daysRemaining} days\r\n                    </div>\r\n                )}\r\n                <button\r\n                    className=\"set-banner-btn\"\r\n                    disabled={!selectedBackdrop || saving || !canUpdate}\r\n                    onClick={handleSaveClick}\r\n                >\r\n                    {saving ? 'Saving...' : canUpdate ? 'Set as Banner' : 'Locked'}\r\n                </button>\r\n            </div>\r\n\r\n\r\n            {/* Custom Confirmation Modal */}\r\n            {\r\n                showConfirm && (\r\n                    <div className=\"confirm-modal-overlay\">\r\n                        <div className=\"confirm-modal\">\r\n                            <h3>Confirm Banner Change</h3>\r\n                            <p>Once selected, you can only change your banner again after <b>7 days</b>.</p>\r\n                            <div className=\"confirm-actions\">\r\n                                <button className=\"confirm-btn cancel\" onClick={() => setShowConfirm(false)}>Cancel</button>\r\n                                <button className=\"confirm-btn ok\" onClick={confirmSave}>Set Banner</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default BannerSelection;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\BannerViewModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\ErrorBoundary.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":9,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[244,249],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null, errorInfo: null };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.setState({ error, errorInfo });\r\n        console.error(\"Uncaught error:\", error, errorInfo);\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return (\r\n                <div style={{ padding: '2rem', color: 'red', background: '#fff', height: '100vh' }}>\r\n                    <h1>Something went wrong.</h1>\r\n                    <details style={{ whiteSpace: 'pre-wrap' }}>\r\n                        {this.state.error && this.state.error.toString()}\r\n                        <br />\r\n                        {this.state.errorInfo && this.state.errorInfo.componentStack}\r\n                    </details>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\ForgotPassword.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onSuccess' is defined but never used.","line":4,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"onSuccess"},"fix":{"range":[119,130],"text":""},"desc":"Remove unused variable 'onSuccess'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\n\nconst ForgotPassword = ({ onToggle, onSuccess }) => {\n  const { verifyAndResetPassword } = useAuth();\n  const [formData, setFormData] = useState({\n    username: '',\n    dob: ''\n  });\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError('');\n  };\n\n  const handleVerify = async (e) => {\n    e.preventDefault();\n\n    if (!formData.username || !formData.dob) {\n      setError('Please enter both username and date of birth');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      setMessage('');\n      await verifyAndResetPassword(formData.username, formData.dob);\n      setMessage('Identity verified. A password reset link has been sent to your registered email.');\n      // Optional: Call onSuccess if you want to switch view, but message is better here.\n    } catch (err) {\n      console.error(err);\n      setError(err.message || 'Failed to verify details. Please check your username and date of birth.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleVerify} className=\"auth-form\">\n      <h1 className=\"login-title\">Forgot Password</h1>\n\n      {!message ? (\n        <p className=\"login-subtitle\">\n          Enter your Username and Date of Birth to reset your password.\n        </p>\n      ) : (\n        <div className=\"success-message\" style={{ color: '#00cc33', marginBottom: '20px', textAlign: 'center' }}>\n          {message}\n        </div>\n      )}\n\n      {error && <p className=\"error-message\">{error}</p>}\n\n      {!message && (\n        <>\n          <div className=\"form-group\">\n            <label>Username</label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"Enter your username\"\n              className=\"input-field\"\n              value={formData.username}\n              onChange={handleChange}\n              autoComplete=\"username\"\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Date of Birth</label>\n            <input\n              type=\"date\"\n              name=\"dob\"\n              placeholder=\"Date of Birth\"\n              className=\"input-field\"\n              value={formData.dob}\n              onChange={handleChange}\n              max={new Date().toISOString().split('T')[0]}\n              required\n            />\n          </div>\n\n          <button type=\"submit\" className=\"submit-button\" disabled={loading}>\n            {loading ? 'Verifying...' : 'Reset Password'}\n          </button>\n        </>\n      )}\n\n      <div className=\"divider\"></div>\n\n      <p className=\"back-link\" onClick={() => onToggle('signin')} style={{ cursor: 'pointer', textAlign: 'center', color: '#888', fontSize: '0.9rem', marginTop: '15px' }}>\n        ← Back to Sign In\n      </p>\n    </form>\n  );\n};\n\nexport default ForgotPassword;\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\Header.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onLogout' is defined but never used.","line":14,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"onLogout"},"fix":{"range":[544,556],"text":""},"desc":"Remove unused variable 'onLogout'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  36 |     useEffect(() => {\n  37 |         if (location.state?.selectForFavorite) {\n> 38 |             setSelectionMode({ active: true, slotIndex: location.state.slotIndex });\n     |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  39 |         } else {\n  40 |             // Only reset if we are NOT in a persistent search flow? \n  41 |             // Actually, if we navigate to Profile, this effect runs. Profile doesn't have state.","line":38,"column":13,"nodeType":null,"endLine":38,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'TMDB_API_KEY'. Either include it or remove the dependency array.","line":104,"column":8,"nodeType":"ArrayExpression","endLine":104,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [TMDB_API_KEY, searchTerm]","fix":{"range":[4205,4217],"text":"[TMDB_API_KEY, searchTerm]"}}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  122 |         // For now assume mixed or reset. Let's filter for objects or upgrade strings\n  123 |         const normalized = saved.map(item => typeof item === 'string' ? { name: item, id: 'legacy-' + item } : item);\n> 124 |         setRecentSearches(normalized);\n      |         ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  125 |     }, [isSearchActive]);\n  126 |\n  127 |     const addToRecent = (item) => {","line":124,"column":9,"nodeType":null,"endLine":124,"endColumn":26},{"ruleId":"no-unused-vars","severity":2,"message":"'handleBlur' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":199,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":199,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleBlur"},"fix":{"range":[8093,8303],"text":""},"desc":"Remove unused variable 'handleBlur'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport { CgProfile } from 'react-icons/cg';\r\nimport { IoSettingsOutline } from 'react-icons/io5';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { MdCheck } from 'react-icons/md';\r\nimport Notify from './Notify';\r\nimport '../pages/Home.css';\r\n\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { db } from '../firebase-config';\r\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\r\n\r\nconst Header = ({ onLogout }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [suggestions, setSuggestions] = useState([]);\r\n    const [showSuggestions, setShowSuggestions] = useState(false);\r\n    const [showSuccess, setShowSuccess] = useState(false);\r\n    const [isSearchActive, setIsSearchActive] = useState(false);\r\n    const [duplicateAlert, setDuplicateAlert] = useState(false); // Alert state\r\n\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const inputRef = useRef(null);\r\n    const searchContainerRef = useRef(null);\r\n\r\n    const { currentUser } = useAuth(); // Get User\r\n\r\n    // Selection Mode State (Merged from Location or Event)\r\n    const [selectionMode, setSelectionMode] = useState({\r\n        active: false,\r\n        slotIndex: null\r\n    });\r\n\r\n    // Sync with Location if present (Priority mostly to initial load if navigated)\r\n    useEffect(() => {\r\n        if (location.state?.selectForFavorite) {\r\n            setSelectionMode({ active: true, slotIndex: location.state.slotIndex });\r\n        } else {\r\n            // Only reset if we are NOT in a persistent search flow? \r\n            // Actually, if we navigate to Profile, this effect runs. Profile doesn't have state.\r\n            // So we reset. This is correct except if we want to persist across generic nav?\r\n            // User flow: Profile -> Header Search -> Stay on Profile.\r\n            // Profile -> Search Page -> Profile.\r\n            // So default reset is fine.\r\n            setSelectionMode({ active: false, slotIndex: null });\r\n        }\r\n    }, [location.state]);\r\n\r\n    // Custom Event Listener\r\n    useEffect(() => {\r\n        const handleTrigger = (e) => {\r\n            const { slotIndex } = e.detail;\r\n            setSelectionMode({ active: true, slotIndex });\r\n            setIsSearchActive(true);\r\n            setTimeout(() => inputRef.current?.focus(), 100);\r\n        };\r\n        window.addEventListener('trigger-search-bar', handleTrigger);\r\n        return () => window.removeEventListener('trigger-search-bar', handleTrigger);\r\n    }, []);\r\n\r\n    // Click Outside Handling\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (searchContainerRef.current && !searchContainerRef.current.contains(event.target)) {\r\n                setIsSearchActive(false);\r\n                setShowSuggestions(false);\r\n            }\r\n        };\r\n\r\n        if (isSearchActive) {\r\n            document.addEventListener('mousedown', handleClickOutside);\r\n        } else {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [isSearchActive]);\r\n\r\n    const TMDB_API_KEY = import.meta.env.VITE_TMDB_API_KEY;\r\n    const TMDB_BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\n    useEffect(() => {\r\n        const fetchSuggestions = async () => {\r\n            if (searchTerm.length > 2) {\r\n                try {\r\n                    const response = await fetch(`${TMDB_BASE_URL}/search/tv?api_key=${TMDB_API_KEY}&query=${encodeURIComponent(searchTerm)}`);\r\n                    const data = await response.json();\r\n                    setSuggestions(data.results.slice(0, 5));\r\n                    setShowSuggestions(true);\r\n                } catch (e) {\r\n                    console.error(e);\r\n                }\r\n            } else {\r\n                setSuggestions([]);\r\n                setShowSuggestions(false);\r\n            }\r\n        };\r\n\r\n        const timeoutId = setTimeout(fetchSuggestions, 300);\r\n        return () => clearTimeout(timeoutId);\r\n    }, [searchTerm]);\r\n\r\n    const handleSearch = (e) => {\r\n        e.preventDefault();\r\n        if (searchTerm.trim()) {\r\n            navigate(`/search?q=${encodeURIComponent(searchTerm)}`, {\r\n                state: selectionMode.active ? { selectForFavorite: true, slotIndex: selectionMode.slotIndex } : {}\r\n            });\r\n            setShowSuggestions(false);\r\n        }\r\n    };\r\n\r\n    const [recentSearches, setRecentSearches] = useState([]); // Store objects {id, name, poster_path}\r\n\r\n    // Load Recents\r\n    useEffect(() => {\r\n        const saved = JSON.parse(localStorage.getItem('recentSearches') || '[]');\r\n        // Migrate legacy strings to objects if needed (optional, or just filter)\r\n        // For now assume mixed or reset. Let's filter for objects or upgrade strings\r\n        const normalized = saved.map(item => typeof item === 'string' ? { name: item, id: 'legacy-' + item } : item);\r\n        setRecentSearches(normalized);\r\n    }, [isSearchActive]);\r\n\r\n    const addToRecent = (item) => {\r\n        let current = JSON.parse(localStorage.getItem('recentSearches') || '[]');\r\n        // Remove duplicates by ID (if obj) or Name (if string)\r\n        current = current.filter(i => (typeof i === 'object' ? i.id !== item.id : i !== item.name));\r\n\r\n        // Add new to front\r\n        const newItem = { id: item.id, name: item.name, poster_path: item.poster_path, date: new Date().toISOString() };\r\n        current = [newItem, ...current].slice(0, 5);\r\n\r\n        localStorage.setItem('recentSearches', JSON.stringify(current));\r\n        setRecentSearches(current);\r\n    };\r\n\r\n    const handleSuggestionClick = async (item) => {\r\n        addToRecent(item); // Save to Recents\r\n\r\n        if (selectionMode.active) {\r\n            if (!currentUser) return;\r\n            try {\r\n                const userRef = doc(db, 'users', currentUser.uid);\r\n                const userSnap = await getDoc(userRef);\r\n\r\n                if (userSnap.exists()) {\r\n                    let currentFavs = userSnap.data().favorites || [null, null, null, null, null];\r\n\r\n                    // Duplicate Check\r\n                    const isDuplicate = currentFavs.some((fav, idx) => fav && fav.id === item.id && idx !== selectionMode.slotIndex);\r\n                    if (isDuplicate) {\r\n                        setDuplicateAlert(true);\r\n                        setTimeout(() => setDuplicateAlert(false), 2000);\r\n                        return; // Stop\r\n                    }\r\n\r\n                    // Ensure padding\r\n                    if (currentFavs.length < 5) currentFavs = [...currentFavs, ...Array(5 - currentFavs.length).fill(null)];\r\n\r\n                    // Update\r\n                    currentFavs[selectionMode.slotIndex] = item;\r\n                    await updateDoc(userRef, { favorites: currentFavs });\r\n\r\n                    // Success UI\r\n                    setShowSuccess(true);\r\n                    setShowSuggestions(false);\r\n                    setSearchTerm(''); // Clear search\r\n                    setIsSearchActive(false); // Close bar immediately\r\n\r\n                    // Reset mode\r\n                    setSelectionMode({ active: false, slotIndex: null });\r\n\r\n                    // Navigate (Refresh Profile logic handled by onSnapshot in Profile.jsx)\r\n                    // We navigate just in case user is not on profile\r\n                    setTimeout(() => {\r\n                        setShowSuccess(false);\r\n                        navigate('/profile');\r\n                    }, 2000);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Fav Save Error\", err);\r\n            }\r\n\r\n        } else {\r\n            navigate(`/tv/${item.id}`);\r\n            setSearchTerm('');\r\n            setShowSuggestions(false);\r\n        }\r\n    };\r\n\r\n    const handleSClick = (e) => {\r\n        e.preventDefault();\r\n        setIsSearchActive(true);\r\n    };\r\n\r\n    const handleBlur = () => {\r\n        setTimeout(() => {\r\n            if (!searchTerm) {\r\n                setIsSearchActive(false);\r\n            }\r\n            setShowSuggestions(false);\r\n        }, 200);\r\n    };\r\n\r\n    return (\r\n        <header className=\"header\" style={{ justifyContent: 'space-between', padding: '0 40px' }}>\r\n            {/* Success Popup */}\r\n            {showSuccess && (\r\n                <div style={{\r\n                    position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh',\r\n                    background: 'rgba(0,0,0,0.8)', zIndex: 2000,\r\n                    display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center',\r\n                    animation: 'fadeIn 0.3s ease-out'\r\n                }}>\r\n                    <div style={{\r\n                        width: '100px', height: '100px', borderRadius: '50%', background: '#fff',\r\n                        display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: '20px',\r\n                        animation: 'popIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)'\r\n                    }}>\r\n                        <MdCheck size={60} color=\"#000\" />\r\n                    </div>\r\n                    <h2 style={{ color: '#fff', fontSize: '1.5rem', fontWeight: 'bold', animation: 'fadeIn 1s ease-out' }}>Added to Favorites</h2>\r\n                </div>\r\n            )}\r\n            <style>\r\n                {`\r\n                @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }\r\n                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\r\n                `}\r\n            </style>\r\n\r\n            {/* Duplicate Alert */}\r\n            {duplicateAlert && (\r\n                <div style={{\r\n                    position: 'fixed', top: '100px', left: '50%', transform: 'translateX(-50%)',\r\n                    background: '#ff4444', color: 'white', padding: '15px 30px', borderRadius: '8px',\r\n                    zIndex: 2100, fontWeight: 'bold', boxShadow: '0 5px 20px rgba(0,0,0,0.3)',\r\n                    animation: 'fadeIn 0.2s ease-out', display: 'flex', alignItems: 'center', gap: '10px'\r\n                }}>\r\n                    <span>⚠️ This series is already in your favorites!</span>\r\n                </div>\r\n            )}\r\n\r\n            {/* LEFT SPACER */}\r\n            <div className=\"header-left\" style={{ flex: 1, display: 'flex', alignItems: 'center' }}>\r\n                <Notify />\r\n            </div>\r\n\r\n            {/* CENTER: DYNAMIC LOGO / SEARCH */}\r\n            <div ref={searchContainerRef} style={{ flex: 1, display: 'flex', justifyContent: 'center', position: 'relative' }}>\r\n                <style>\r\n                    {`\r\n                    .search-input::placeholder {\r\n                        color: var(--text-primary);\r\n                        opacity: 1; /* Firefox */\r\n                    }\r\n                    `}\r\n                </style>\r\n                <div style={{\r\n                    display: 'flex', alignItems: 'center',\r\n                    position: 'relative'\r\n                }}>\r\n                    {/* The \"S\" Trigger - Fades Out (Replaced by Search Bar S) */}\r\n                    <div\r\n                        onClick={handleSClick}\r\n                        style={{\r\n                            color: 'var(--accent-color)',\r\n                            cursor: 'pointer',\r\n                            zIndex: 10,\r\n                            whiteSpace: 'nowrap',\r\n                            transition: 'all 0.5s ease',\r\n                            opacity: isSearchActive ? 0 : 1,\r\n                            width: isSearchActive ? 0 : 'auto',\r\n                            overflow: 'hidden',\r\n                            marginRight: isSearchActive ? 0 : '2px'\r\n                        }}\r\n                        className=\"app-logo-text\"\r\n                    >\r\n                        S\r\n                    </div>\r\n\r\n                    {/* Search Input Container - Expands */}\r\n                    <div className={isSearchActive ? \"search-bar-container-responsive\" : \"\"} style={{\r\n                        transition: 'all 0.5s ease',\r\n                        width: isSearchActive ? '350px' : 0, // Increased width for Icon + S + EARCH\r\n                        opacity: isSearchActive ? 1 : 0,\r\n                        overflow: 'hidden',\r\n                        display: 'flex', alignItems: 'center'\r\n                    }}>\r\n                        {/* Search Icon */}\r\n                        <FaSearch style={{ color: 'var(--text-muted)', fontSize: '1.2rem', marginRight: '15px', minWidth: '20px' }} />\r\n\r\n                        <form onSubmit={handleSearch} style={{ width: '100%', display: 'flex', alignItems: 'center' }}>\r\n                            <input\r\n                                ref={inputRef}\r\n                                autoFocus={isSearchActive}\r\n                                type=\"text\"\r\n                                placeholder=\"\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                onBlur={() => { }}\r\n                                onFocus={() => searchTerm.length > 2 && setShowSuggestions(true)}\r\n                                className=\"search-input search-input-responsive\"\r\n                                style={{\r\n                                    width: '100%',\r\n                                    background: 'transparent', // Handled by container class on mobile\r\n                                    border: 'none',\r\n                                    borderBottom: '2px solid var(--accent-color)', // Default\r\n                                    color: 'var(--text-primary)',\r\n                                    fontSize: '1.5rem',\r\n                                    fontFamily: 'sans-serif',\r\n                                    fontWeight: 'bold',\r\n                                    outline: 'none',\r\n                                    padding: '5px'\r\n                                }}\r\n                            />\r\n                        </form>\r\n                    </div>\r\n\r\n                    {/* \"ERIEE\" Text - Clickable to Close */}\r\n                    <div\r\n                        onClick={() => setIsSearchActive(false)}\r\n                        style={{\r\n                            color: 'var(--text-primary)',\r\n                            transition: 'all 0.5s ease',\r\n                            cursor: 'pointer',\r\n                            whiteSpace: 'nowrap',\r\n                            marginLeft: isSearchActive ? '10px' : '2px',\r\n                        }}\r\n                        className=\"app-logo-text\"\r\n                    >\r\n                        ERIEE\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Suggestions / Recents Dropdown */}\r\n                {((showSuggestions && suggestions.length > 0) || (isSearchActive && !searchTerm && recentSearches.length > 0)) && (\r\n                    <div className=\"suggestions-dropdown-responsive\" style={{\r\n                        position: 'absolute',\r\n                        top: '100%',\r\n                        left: '50%',\r\n                        transform: 'translateX(-50%)',\r\n                        width: '300px',\r\n                        // background/border handled by class (Black/Square)\r\n                        zIndex: 1000,\r\n                        marginTop: '10px',\r\n                        maxHeight: '400px',\r\n                        overflowY: 'auto'\r\n                    }}>\r\n                        {searchTerm ? (\r\n                            suggestions.map(s => (\r\n                                <div\r\n                                    key={s.id}\r\n                                    onClick={() => handleSuggestionClick(s)}\r\n                                    style={{\r\n                                        padding: '10px',\r\n                                        borderBottom: '1px solid var(--border-color)',\r\n                                        cursor: 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '10px',\r\n                                        color: 'var(--text-primary)',\r\n                                        textAlign: 'left'\r\n                                    }}\r\n                                >\r\n                                    <img\r\n                                        src={`https://image.tmdb.org/t/p/w92${s.poster_path}`}\r\n                                        alt={s.name}\r\n                                        style={{ width: '40px', height: '60px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                        onError={(e) => e.target.style.display = 'none'}\r\n                                    />\r\n                                    <div>\r\n                                        <div style={{ fontWeight: 'bold', marginBottom: '5px', fontSize: '1rem' }}>{s.name}</div>\r\n                                        <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{s.first_air_date ? s.first_air_date.split('-')[0] : ''}</div>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            // Recents\r\n                            <>\r\n                                <div style={{ padding: '10px', fontSize: '0.8rem', color: 'var(--text-muted)', fontWeight: 'bold', letterSpacing: '1px', background: 'rgba(255,255,255,0.05)' }}>RECENT SEARCHES</div>\r\n                                {recentSearches.map((s, i) => (\r\n                                    <div\r\n                                        key={s.id || i}\r\n                                        onClick={() => handleSuggestionClick(s)} // Treat recent click same as suggestion click\r\n                                        style={{\r\n                                            padding: '10px',\r\n                                            borderBottom: '1px solid var(--border-color)',\r\n                                            cursor: 'pointer',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '10px',\r\n                                            color: 'var(--text-primary)',\r\n                                            textAlign: 'left',\r\n                                            opacity: 0.8\r\n                                        }}\r\n                                    >\r\n                                        {s.poster_path ? (\r\n                                            <img\r\n                                                src={`https://image.tmdb.org/t/p/w92${s.poster_path}`}\r\n                                                alt={s.name}\r\n                                                style={{ width: '40px', height: '60px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                            />\r\n                                        ) : (\r\n                                            <div style={{ width: '40px', height: '60px', background: '#333', borderRadius: '4px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                                <FaSearch color=\"#666\" />\r\n                                            </div>\r\n                                        )}\r\n                                        <div>\r\n                                            <div style={{ fontWeight: 'bold', marginBottom: '2px', fontSize: '0.95rem' }}>{s.name}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* RIGHT SPACER */}\r\n            <div style={{ flex: 1 }}></div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\HeroCarousel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\HeroPreview.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'containerRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'containerRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":60,"column":71,"nodeType":"Identifier","endLine":60,"endColumn":78},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  67 |     // Simple heuristic: if last_episode_to_air is recent (< 7 days)\n  68 |     const lastAirDate = new Date(seriesData.last_episode_to_air?.air_date);\n> 69 |     const isNew = (Date.now() - lastAirDate.getTime()) < (7 * 24 * 60 * 60 * 1000);\n     |                    ^^^^^^^^^^ Cannot call impure function\n  70 |     const label = isNew ? \"BRAND NEW EPISODE\" : \"TRENDING NOW\";\n  71 |\n  72 |     return (","line":69,"column":20,"nodeType":null,"endLine":69,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { tmdbApi } from '../utils/tmdbApi';\r\nimport { getResolvedPosterUrl } from '../utils/globalPosterResolver';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { MdPlayArrow, MdTrendingUp } from 'react-icons/md';\r\nimport './HeroPreview.css';\r\n\r\nconst HeroPreview = ({ seriesId }) => {\r\n    const [seriesData, setSeriesData] = useState(null);\r\n    const [trailerKey, setTrailerKey] = useState(null);\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [isVideoLoaded, setIsVideoLoaded] = useState(false);\r\n    const containerRef = useRef(null);\r\n    const navigate = useNavigate();\r\n    const { globalPosters } = useAuth(); // For poster fallback\r\n\r\n    // 1. Fetch Data & Find Trailer\r\n    useEffect(() => {\r\n        if (!seriesId) return;\r\n\r\n        const fetchData = async () => {\r\n            try {\r\n                // This uses your existing backend cache (24h TTL)\r\n                // It fetches videos automatically via append_to_response\r\n                const data = await tmdbApi.getSeriesDetails(seriesId);\r\n                setSeriesData(data);\r\n\r\n                // Find Trailer: Type=\"Trailer\" + Site=\"YouTube\"\r\n                // Prefer Official\r\n                const videos = data.videos?.results || [];\r\n                const trailer = videos.find(v => v.type === 'Trailer' && v.site === 'YouTube' && v.official)\r\n                    || videos.find(v => v.type === 'Trailer' && v.site === 'YouTube');\r\n\r\n                if (trailer) {\r\n                    setTrailerKey(trailer.key);\r\n                }\r\n            } catch (err) {\r\n                console.warn(\"[HeroPreview] Failed to fetch:\", err);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [seriesId]);\r\n\r\n    // 2. Intersection Observer (Auto-Play/Pause)\r\n    useEffect(() => {\r\n        const observer = new IntersectionObserver(\r\n            ([entry]) => {\r\n                setIsVisible(entry.isIntersecting);\r\n            },\r\n            { threshold: 0.5 } // 50% visible to play\r\n        );\r\n\r\n        if (containerRef.current) {\r\n            observer.observe(containerRef.current);\r\n        }\r\n\r\n        return () => {\r\n            if (containerRef.current) observer.unobserve(containerRef.current);\r\n        };\r\n    }, []);\r\n\r\n    if (!seriesData) return null; // Or a skeleton loader if preferred\r\n\r\n    // Label Logic: New Season vs New Episode\r\n    // Simple heuristic: if last_episode_to_air is recent (< 7 days)\r\n    const lastAirDate = new Date(seriesData.last_episode_to_air?.air_date);\r\n    const isNew = (Date.now() - lastAirDate.getTime()) < (7 * 24 * 60 * 60 * 1000);\r\n    const label = isNew ? \"BRAND NEW EPISODE\" : \"TRENDING NOW\";\r\n\r\n    return (\r\n        <div className=\"hero-preview-container\" ref={containerRef} onClick={() => navigate(`/tv/${seriesId}`)}>\r\n\r\n            {/* A. MEDIA LAYER */}\r\n            <div className=\"hero-media-wrapper\">\r\n                {trailerKey && isVisible ? (\r\n                    <iframe\r\n                        className={`hero-video-iframe ${isVideoLoaded ? 'visible' : ''}`}\r\n                        src={`https://www.youtube.com/embed/${trailerKey}?autoplay=1&mute=1&controls=0&loop=1&playlist=${trailerKey}&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&playsinline=1&enablejsapi=1&origin=${window.location.origin}`}\r\n                        title=\"Hero Trailer\"\r\n                        allow=\"autoplay; encrypted-media\"\r\n                        onLoad={() => setIsVideoLoaded(true)}\r\n                    />\r\n                ) : null}\r\n\r\n                {/* Fallback Poster (Visible while loading or if no video) */}\r\n                <img\r\n                    className=\"hero-fallback-poster\"\r\n                    src={getResolvedPosterUrl(seriesData.id, seriesData.backdrop_path, globalPosters, 'w780') || ''}\r\n                    alt={seriesData.name}\r\n                    style={{ display: isVideoLoaded && isVisible ? 'none' : 'block' }}\r\n                />\r\n            </div>\r\n\r\n            {/* B. OVERLAY GRADIENT */}\r\n            <div className=\"hero-overlay-gradient\"></div>\r\n\r\n            {/* C. CONTENT LAYER */}\r\n            <div className=\"hero-content-layer\">\r\n                <div className=\"hero-eyebrow\">\r\n                    <MdTrendingUp size={16} /> {label}\r\n                </div>\r\n\r\n                <h1 className=\"hero-title\">{seriesData.name}</h1>\r\n\r\n                {/* Optional: Description Blurb (Desktop mostly) */}\r\n                <p className=\"hero-desc-blurb\">\r\n                    {seriesData.overview}\r\n                </p>\r\n\r\n                <button className=\"hero-cta-btn\">\r\n                    <MdPlayArrow className=\"play-icon-mini\" /> View Series\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HeroPreview;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\HoverCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[17,28],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-undef","severity":2,"message":"'loadingVideo' is not defined.","line":49,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'videoKey' is not defined.","line":51,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'videoKey' is not defined.","line":53,"column":71,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":79},{"ruleId":"no-undef","severity":2,"message":"'videoKey' is not defined.","line":53,"column":138,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":146}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport { MdStar, MdPlayArrow, MdError, MdAdd } from 'react-icons/md';\r\nimport { Link } from 'react-router-dom';\r\nimport '../pages/Home.css';\r\n\r\nconst HoverCard = ({ series, children }) => {\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const hoverTimeout = useRef(null);\r\n\r\n    const handleMouseEnter = () => {\r\n        hoverTimeout.current = setTimeout(() => {\r\n            setIsHovered(true);\r\n        }, 500);\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        clearTimeout(hoverTimeout.current);\r\n        setIsHovered(false);\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"hover-card-wrapper\"\r\n            onMouseEnter={handleMouseEnter}\r\n            onMouseLeave={handleMouseLeave}\r\n            style={{ position: 'relative' }}\r\n        >\r\n            {children}\r\n\r\n            {isHovered && (\r\n                <div\r\n                    className=\"hover-popup\"\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '-50%', // Move up to center vertically roughly or clear the top\r\n                        left: '-50%', // Move left to center horizontally\r\n                        width: '200%', // Make it wide (landscape)\r\n                        zIndex: 1000,\r\n                        background: '#141414',\r\n                        boxShadow: '0 10px 30px rgba(0,0,0,0.9)',\r\n                        borderRadius: '6px',\r\n                        border: 'none',\r\n                        overflow: 'hidden',\r\n                        animation: 'fadeIn 0.3s ease-out',\r\n                        transformOrigin: 'center center'\r\n                    }}\r\n                >\r\n                    <div className=\"media-container\" style={{ position: 'relative', width: '100%', paddingTop: '56.25%', background: '#000' }}>\r\n                        {loadingVideo ? (\r\n                            <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#666' }}>Loading Trailer...</div>\r\n                        ) : videoKey ? (\r\n                            <iframe\r\n                                src={`https://www.youtube.com/embed/${videoKey}?autoplay=1&controls=1&modestbranding=1&loop=1&playlist=${videoKey}&rel=0`}\r\n                                title=\"Trailer\"\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    top: 0,\r\n                                    left: 0,\r\n                                    width: '100%',\r\n                                    height: '100%',\r\n                                    border: 'none',\r\n                                    objectFit: 'cover'\r\n                                }}\r\n                                frameBorder=\"0\"\r\n                                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                                allowFullScreen\r\n                            ></iframe>\r\n                        ) : (\r\n                            <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                <img src={`https://image.tmdb.org/t/p/w500${series.backdrop_path || series.poster_path}`} style={{ width: '100%', height: '100%', objectFit: 'cover', opacity: 0.6 }} />\r\n                                <MdError style={{ position: 'absolute', color: '#666' }} />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"popup-info\" style={{ padding: '15px', background: '#181818' }}>\r\n                        <h4 style={{ margin: '0 0 8px 0', fontSize: '1rem', color: '#fff', fontWeight: 'bold' }}>{series.name}</h4>\r\n\r\n                        <div style={{ display: 'flex', gap: '10px', alignItems: 'center', marginBottom: '12px' }}>\r\n                            <span style={{ color: '#46d369', fontWeight: 'bold', fontSize: '0.9rem' }}>98% Match</span>\r\n                            <span style={{ border: '1px solid #666', padding: '0 4px', fontSize: '0.7rem', color: '#ccc' }}>16+</span>\r\n                            <span style={{ fontSize: '0.9rem', color: '#ccc' }}>{series.first_air_date?.split('-')[0] || 'N/A'}</span>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\r\n                            <div style={{ display: 'flex', flex: 1, gap: '5px' }}>\r\n                                <div style={{\r\n                                    background: '#fff',\r\n                                    color: 'black',\r\n                                    width: '32px',\r\n                                    height: '32px',\r\n                                    borderRadius: '50%',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    cursor: 'pointer'\r\n                                }}>\r\n                                    <MdPlayArrow size={24} />\r\n                                </div>\r\n                                <div style={{\r\n                                    border: '2px solid #666',\r\n                                    color: 'white',\r\n                                    width: '32px',\r\n                                    height: '32px',\r\n                                    borderRadius: '50%',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    cursor: 'pointer'\r\n                                }}>\r\n                                    <MdAdd size={20} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Link\r\n                                to={`/tv/${series.id}`}\r\n                                className=\"popup-btn\"\r\n                                style={{\r\n                                    background: 'transparent',\r\n                                    color: '#fff',\r\n                                    padding: '5px 10px',\r\n                                    fontSize: '0.8rem',\r\n                                    fontWeight: 'bold',\r\n                                    textDecoration: 'none',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    border: '1px solid #666',\r\n                                    borderRadius: '4px'\r\n                                }}\r\n                            >\r\n                                Info\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HoverCard;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\LoadingPopup.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\MobileIndicator.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'offset' is assigned a value but never used.","line":5,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":79,"suggestions":[{"messageId":"removeVar","data":{"varName":"offset"},"fix":{"range":[242,255],"text":""},"desc":"Remove unused variable 'offset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'coords' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"coords"},"fix":{"range":[418,424],"text":""},"desc":"Remove unused variable 'coords'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setCoords' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"setCoords"},"fix":{"range":[424,435],"text":""},"desc":"Remove unused variable 'setCoords'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  16 |     useEffect(() => {\n  17 |         if (activeIndicatorId === id) {\n> 18 |             setIsVisible(true);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  19 |\n  20 |             // Auto dismiss timer\n  21 |             const timer = setTimeout(() => {","line":18,"column":13,"nodeType":null,"endLine":18,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'rect' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":33,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"rect"},"fix":{"range":[1126,1181],"text":""},"desc":"Remove unused variable 'rect'."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useOnboarding } from '../context/OnboardingContext';\r\nimport './MobileIndicator.css'; // We'll create this\r\n\r\nconst MobileIndicator = ({ id, message, targetRef, position = 'bottom', offset = 10, style = {} }) => {\r\n    const { activeIndicatorId, requestShow, dismiss } = useOnboarding();\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [coords, setCoords] = useState(null);\r\n\r\n    // Try to show on mount\r\n    useEffect(() => {\r\n        requestShow(id);\r\n    }, [id, requestShow]);\r\n\r\n    // Sync visibility with context\r\n    useEffect(() => {\r\n        if (activeIndicatorId === id) {\r\n            setIsVisible(true);\r\n\r\n            // Auto dismiss timer\r\n            const timer = setTimeout(() => {\r\n                dismiss(id);\r\n            }, 2500);\r\n            return () => clearTimeout(timer);\r\n        } else {\r\n            setIsVisible(false);\r\n        }\r\n    }, [activeIndicatorId, id, dismiss]);\r\n\r\n    // Update coordinates if targetRef is provided\r\n    useEffect(() => {\r\n        if (isVisible && targetRef?.current) {\r\n            const rect = targetRef.current.getBoundingClientRect();\r\n            // We want fixed positioning relative to viewport since it's \"floating\" over everything\r\n            // Actually usually simplest is absolute relative to parent if parent is relative.\r\n            // But strict requirement: \"Floating... not popups\".\r\n            // Let's use relative to parent for simplicity if the parent is the button wrapper.\r\n            // If targetRef not passed, assume parent is relative.\r\n\r\n            // However, for precise control (like \"below button\"), simple CSS is often best if component is IN the JSX.\r\n            // If component is fully separate, we need coords.\r\n            // Let's assume component is placed INSIDE the button container for standard usage.\r\n        }\r\n    }, [isVisible, targetRef]);\r\n\r\n    if (!isVisible) return null;\r\n\r\n    // Default class based on position prop\r\n    const positionClass = `mobile-indicator-${position}`;\r\n\r\n    return (\r\n        <div\r\n            className={`mobile-indicator ${positionClass}`}\r\n            style={style}\r\n        >\r\n            {message}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MobileIndicator;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\Notify.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\PosterBadge.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\PosterUnlockPopup.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'seriesName' is defined but never used.","line":5,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"seriesName"},"fix":{"range":[198,210],"text":""},"desc":"Remove unused variable 'seriesName'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { MdClose, MdEdit } from 'react-icons/md';\r\n\r\nconst PosterUnlockPopup = ({ isOpen, onClose, seriesId, seasonNumber, seriesName }) => {\r\n    const navigate = useNavigate();\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleEditPoster = () => {\r\n        navigate(`/series/${seriesId}/season/${seasonNumber}/posters`);\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            background: 'rgba(0, 0, 0, 0.9)',\r\n            zIndex: 6000,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            animation: 'fadeIn 300ms ease-out'\r\n        }}>\r\n            <div style={{\r\n                background: '#111',\r\n                borderRadius: '16px',\r\n                padding: '40px',\r\n                maxWidth: '500px',\r\n                width: '90%',\r\n                textAlign: 'center',\r\n                position: 'relative',\r\n                border: '2px solid #FFD600',\r\n                boxShadow: '0 20px 60px rgba(255, 214, 0, 0.2)'\r\n            }}>\r\n                {/* Close button */}\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '15px',\r\n                        right: '15px',\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#fff',\r\n                        fontSize: '24px',\r\n                        cursor: 'pointer',\r\n                        padding: '5px'\r\n                    }}\r\n                >\r\n                    <MdClose />\r\n                </button>\r\n\r\n                {/* Completion badge */}\r\n                <div style={{\r\n                    display: 'inline-block',\r\n                    background: 'rgba(255, 214, 0, 0.15)',\r\n                    border: '1.5px solid rgba(255, 214, 0, 0.4)',\r\n                    borderRadius: '20px',\r\n                    padding: '8px 16px',\r\n                    marginBottom: '20px'\r\n                }}>\r\n                    <span style={{\r\n                        fontSize: '18px',\r\n                        fontWeight: '700',\r\n                        color: '#FFD600',\r\n                        letterSpacing: '0.5px'\r\n                    }}>\r\n                        Season {seasonNumber} • Completed\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <h2 style={{\r\n                    fontSize: '24px',\r\n                    fontWeight: 'bold',\r\n                    color: '#fff',\r\n                    margin: '0 0 15px 0'\r\n                }}>\r\n                    Posters Unlocked! 🎨\r\n                </h2>\r\n\r\n                {/* Message */}\r\n                <p style={{\r\n                    fontSize: '16px',\r\n                    color: '#ccc',\r\n                    lineHeight: '1.6',\r\n                    margin: '0 0 30px 0'\r\n                }}>\r\n                    You unlocked posters for this season. You can now customize the poster displayed on your profile, in stories, and across the app.\r\n                </p>\r\n\r\n                {/* Buttons */}\r\n                <div style={{\r\n                    display: 'flex',\r\n                    gap: '15px',\r\n                    justifyContent: 'center'\r\n                }}>\r\n                    <button\r\n                        onClick={handleEditPoster}\r\n                        style={{\r\n                            background: '#FFD600',\r\n                            color: '#000',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            padding: '12px 24px',\r\n                            fontSize: '16px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '8px',\r\n                            transition: 'transform 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => e.target.style.transform = 'scale(1.05)'}\r\n                        onMouseLeave={(e) => e.target.style.transform = 'scale(1)'}\r\n                    >\r\n                        <MdEdit size={20} />\r\n                        Edit Poster\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            color: '#fff',\r\n                            border: '2px solid #333',\r\n                            borderRadius: '8px',\r\n                            padding: '12px 24px',\r\n                            fontSize: '16px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            transition: 'border-color 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => e.target.style.borderColor = '#555'}\r\n                        onMouseLeave={(e) => e.target.style.borderColor = '#333'}\r\n                    >\r\n                        Later\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PosterUnlockPopup;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\PremiumLoader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\ProtectedRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\ReviewModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setHoverRating' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setHoverRating"},"fix":{"range":[372,388],"text":""},"desc":"Remove unused variable 'setHoverRating'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'showSuccess' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"showSuccess"},"fix":{"range":[417,428],"text":""},"desc":"Remove unused variable 'showSuccess'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { MdStar, MdStarHalf, MdStarBorder, MdClose } from 'react-icons/md';\r\n\r\nconst ReviewModal = ({ isOpen, onClose, onSubmit, movieName, initialRating = 5, initialReview = '', modalTitle }) => {\r\n    const [rating, setRating] = useState(initialRating);\r\n    const [review, setReview] = useState(initialReview);\r\n    const [hoverRating, setHoverRating] = useState(0);\r\n    const [showSuccess, setShowSuccess] = useState(false);\r\n\r\n    // Reset or Set values when modal opens\r\n    if (!isOpen && (rating !== initialRating || review !== initialReview)) {\r\n        // Optional: reset on close needed? logic handled below\r\n    }\r\n\r\n    // Better: Effect to sync props to state when modal opens\r\n    // We can't rely just on props change, we need to reset when isOpen changes to true.\r\n    // However, hooks can't be conditional.\r\n    // Let's use a key or simpler: just set defaults and maybe a specific effect if props change while open (unlikely).\r\n    // Actually, best pattern is to Key the modal or use Effect.\r\n    // Let's use Effect.\r\n\r\n    // Re-initialize when isOpen becomes true or props change\r\n    const [prevIsOpen, setPrevIsOpen] = useState(false);\r\n    if (isOpen && !prevIsOpen) {\r\n        setRating(initialRating || 5);\r\n        setReview(initialReview || '');\r\n        setPrevIsOpen(true);\r\n    } else if (!isOpen && prevIsOpen) {\r\n        setPrevIsOpen(false);\r\n    }\r\n\r\n    if (!isOpen) return null;\r\n    // ... (rest of component)\r\n\r\n    const handleStarClick = (star) => {\r\n        // Toggle half star: if clicking the current full star, make it half.\r\n        if (rating === star) {\r\n            setRating(star - 0.5);\r\n        } else if (rating === star - 0.5) {\r\n            setRating(star);\r\n        } else {\r\n            setRating(star);\r\n        }\r\n    };\r\n\r\n    const renderStar = (star) => {\r\n        const isFull = (hoverRating || rating) >= star;\r\n        const isHalf = (hoverRating || rating) >= star - 0.5 && (hoverRating || rating) < star;\r\n\r\n        if (isHalf) return <MdStarHalf size={36} />;\r\n        if (isFull) return <MdStar size={36} />;\r\n        return <MdStarBorder size={36} />;\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onSubmit({ rating, review });\r\n\r\n        setShowSuccess(true);\r\n        setTimeout(() => {\r\n            setShowSuccess(false);\r\n            onClose();\r\n        }, 1500);\r\n    };\r\n\r\n    // ... (success view)\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed', top: 0, left: 0, width: '100%', height: '100%',\r\n            background: 'rgba(0,0,0,0.85)', display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n            zIndex: 10000, backdropFilter: 'blur(4px)', padding: '20px'\r\n        }}>\r\n            <div style={{\r\n                background: '#191919', // Prime Dark\r\n                padding: '30px',\r\n                borderRadius: '8px',\r\n                width: '100%',\r\n                maxWidth: '500px',\r\n                border: 'none',\r\n                position: 'relative',\r\n                boxShadow: '0 10px 30px rgba(0,0,0,0.5)',\r\n                fontFamily: '\"Amazon Ember\", Arial, sans-serif'\r\n            }}>\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{ position: 'absolute', top: '15px', right: '15px', background: 'transparent', border: 'none', color: '#999', cursor: 'pointer' }}\r\n                >\r\n                    <MdClose size={24} />\r\n                </button>\r\n\r\n                <h2 style={{ color: '#ffffff', marginTop: 0, marginBottom: '1.5rem', fontFamily: '\"Amazon Ember\", Arial, sans-serif', fontSize: '1.2rem', fontWeight: '700', textTransform: 'uppercase', letterSpacing: '0.5px' }}>\r\n                    {modalTitle || (initialReview ? 'Edit Review:' : 'Review')} {movieName}\r\n                    <span style={{ fontSize: '0.8rem', color: '#888', display: 'block', marginTop: '5px', fontWeight: 'normal', textTransform: 'none' }}>(Click star again for half)</span>\r\n                </h2>\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                    <div style={{ marginBottom: '1.5rem', textAlign: 'center' }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'center', gap: '8px' }}>\r\n                            {[1, 2, 3, 4, 5].map((star) => (\r\n                                <div\r\n                                    key={star}\r\n                                    onClick={() => handleStarClick(star)}\r\n                                    style={{\r\n                                        cursor: 'pointer',\r\n                                        color: (hoverRating || rating) >= star - 0.5 ? '#FFCC00' : '#444',\r\n                                        transition: 'color 0.2s',\r\n                                        display: 'flex'\r\n                                    }}\r\n                                >\r\n                                    {renderStar(star)}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <div style={{ color: '#FFCC00', marginTop: '8px', fontWeight: '600', fontSize: '1.1rem' }}>{rating} Stars</div>\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '1.5rem' }}>\r\n                        <label style={{ display: 'block', color: '#bbbbbb', marginBottom: '0.5rem', fontSize: '0.9rem', fontWeight: '600', letterSpacing: '0.5px', textTransform: 'uppercase' }}>YOUR REVIEW</label>\r\n                        <textarea\r\n                            value={review}\r\n                            onChange={(e) => setReview(e.target.value)}\r\n                            placeholder=\"Write your thoughts...\"\r\n                            rows=\"5\"\r\n                            style={{\r\n                                width: '100%',\r\n                                background: '#111',\r\n                                border: '1px solid #333',\r\n                                borderRadius: '4px',\r\n                                padding: '12px',\r\n                                color: '#f2f2f2',\r\n                                fontSize: '0.95rem',\r\n                                resize: 'vertical',\r\n                                outline: 'none',\r\n                                fontFamily: '\"Amazon Ember\", Arial, sans-serif',\r\n                                lineHeight: '1.5'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        className='popup-btn'\r\n                        style={{\r\n                            width: '100%',\r\n                            background: '#EDF1F3', // Prime White Button\r\n                            color: '#0F1111',\r\n                            border: '1px solid #EDF1F3',\r\n                            padding: '12px',\r\n                            fontSize: '0.95rem',\r\n                            fontWeight: '700',\r\n                            cursor: 'pointer',\r\n                            textTransform: 'uppercase',\r\n                            borderRadius: '4px',\r\n                            boxShadow: '0 2px 5px rgba(0,0,0,0.1)'\r\n                        }}\r\n                    >\r\n                        {initialReview ? 'Update Review' : 'Post Review'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReviewModal;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\ReviewsDrawer.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onLike' is defined but never used.","line":6,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":77,"suggestions":[{"messageId":"removeVar","data":{"varName":"onLike"},"fix":{"range":[352,360],"text":""},"desc":"Remove unused variable 'onLike'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is defined but never used.","line":6,"column":100,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":105,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[381,388],"text":""},"desc":"Remove unused variable 'theme'."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  112 |                     ) : (\n  113 |                         reviews.map((review) => (\n> 114 |                             <div key={review.id || Math.random()} style={{\n      |                                                    ^^^^^^^^^^^^^ Cannot call impure function\n  115 |                                 background: '#000000', // Pure Black\n  116 |                                 borderRadius: '8px',\n  117 |                                 padding: '16px',","line":114,"column":52,"nodeType":null,"endLine":114,"endColumn":65}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { MdClose, MdStar, MdStarHalf, MdDelete, MdShare, MdPerson, MdFavorite, MdFavoriteBorder, MdEdit } from 'react-icons/md';\r\nimport { useNotification } from '../context/NotificationContext';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ReviewsDrawer = ({ isOpen, onClose, reviews, onDelete, onShare, onLike, onEdit, currentUser, theme }) => {\r\n    const { confirm } = useNotification();\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = 'unset';\r\n        }\r\n        return () => {\r\n            document.body.style.overflow = 'unset';\r\n        };\r\n    }, [isOpen]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleDelete = async (id) => {\r\n        const isConfirmed = await confirm(\"Are you sure you want to delete this review?\", \"Delete Review\");\r\n        if (isConfirmed) {\r\n            onDelete(id);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            zIndex: 9999,\r\n            pointerEvents: 'none'\r\n        }}>\r\n            {/* Backdrop */}\r\n            <div\r\n                onClick={onClose}\r\n                style={{\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    background: 'rgba(0,0,0,0.5)',\r\n                    backdropFilter: 'blur(2px)',\r\n                    opacity: isOpen ? 1 : 0,\r\n                    transition: 'opacity 0.3s ease',\r\n                    pointerEvents: isOpen ? 'auto' : 'none'\r\n                }}\r\n            />\r\n\r\n            {/* Drawer */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                width: '100%',\r\n                maxWidth: '400px',\r\n                background: '#1a1a1a',\r\n                boxShadow: '-5px 0 30px rgba(0,0,0,0.5)',\r\n                transform: isOpen ? 'translateX(0)' : 'translateX(100%)',\r\n                transition: 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                pointerEvents: 'auto',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                borderLeft: '1px solid #333'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '20px',\r\n                    borderBottom: '1px solid #333',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    background: '#222'\r\n                }}>\r\n                    <h2 style={{ margin: 0, fontSize: '1.2rem', color: '#fff' }}>Reviews</h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#aaa',\r\n                            cursor: 'pointer',\r\n                            fontSize: '1.5rem',\r\n                            display: 'flex',\r\n                            alignItems: 'center'\r\n                        }}\r\n                    >\r\n                        <MdClose />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div style={{\r\n                    flex: 1,\r\n                    overflowY: 'auto',\r\n                    padding: '20px',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '20px'\r\n                }}>\r\n                    {reviews.length === 0 ? (\r\n                        <div style={{ textAlign: 'center', color: '#666', marginTop: '40px' }}>\r\n                            No reviews yet. Be the first to add one!\r\n                        </div>\r\n                    ) : (\r\n                        reviews.map((review) => (\r\n                            <div key={review.id || Math.random()} style={{\r\n                                background: '#000000', // Pure Black\r\n                                borderRadius: '8px',\r\n                                padding: '16px',\r\n                                border: '1px solid #333',\r\n                                position: 'relative'\r\n                            }}>\r\n                                {/* Source Indicator / Avatar */}\r\n                                <div style={{\r\n                                    position: 'absolute',\r\n                                    top: '-10px',\r\n                                    left: '-10px',\r\n                                    width: '48px', // Increased Size\r\n                                    height: '48px', // Increased Size\r\n                                    borderRadius: '50%',\r\n                                    background: review.source === 'tmdb' ? '#0d253f' : '#222',\r\n                                    border: review.source === 'tmdb' ? '1px solid #01b4e4' : '2px solid #FFCC00',\r\n                                    color: review.source === 'tmdb' ? '#fff' : '#FFCC00',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    fontSize: '0.8rem',\r\n                                    fontWeight: 'bold',\r\n                                    zIndex: 2,\r\n                                    boxShadow: '0 2px 5px rgba(0,0,0,0.3)',\r\n                                    overflow: 'hidden'\r\n                                }}>\r\n                                    {review.source === 'tmdb' ? (\r\n                                        <img\r\n                                            src=\"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg\"\r\n                                            alt=\"TMDB\"\r\n                                            style={{ width: '28px', height: '28px' }}\r\n                                        />\r\n                                    ) : (\r\n                                        review.userId ? (\r\n                                            <Link to={`/profile/${review.userId}`} style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#FFCC00' }}>\r\n                                                {review.photoURL ? <img src={review.photoURL} alt=\"User\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} /> : <MdPerson size={24} />}\r\n                                            </Link>\r\n                                        ) : <MdPerson size={24} />\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Header: Author & Date */}\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', paddingLeft: '25px' }}> {/* Increased paddingLeft due to larger avatar */}\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                                        <div style={{ fontWeight: '900', color: '#fff', fontSize: '1rem', fontFamily: 'Inter, sans-serif' }}>\r\n                                            {review.userId ? <Link to={`/profile/${review.userId}`} style={{ color: 'inherit', textDecoration: 'none' }}>{(review.author || 'User').split('@')[0]}</Link> : (review.author || 'User').split('@')[0]}\r\n                                        </div>\r\n                                        {review.isEpisode && review.episodeNumber ? (\r\n                                            <span style={{\r\n                                                background: '#333', color: '#fff', fontSize: '0.75rem',\r\n                                                fontWeight: '900', padding: '2px 6px', borderRadius: '4px',\r\n                                                border: '1px solid #555'\r\n                                            }}>\r\n                                                EP{review.episodeNumber}\r\n                                            </span>\r\n                                        ) : (review.isSeason) ? (\r\n                                            <span style={{\r\n                                                background: '#333', color: '#fff', fontSize: '0.75rem',\r\n                                                fontWeight: '900', padding: '2px 6px', borderRadius: '4px',\r\n                                                border: '1px solid #555'\r\n                                            }}>\r\n                                                S{review.seasonNumber}\r\n                                            </span>\r\n                                        ) : null}\r\n                                    </div>\r\n                                    <div style={{ fontSize: '0.8rem', color: '#888', fontWeight: '500' }}>\r\n                                        {review.date ? new Date(review.date).toLocaleDateString() : ''}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Rating & Review Logic */}\r\n                                <div style={{ paddingLeft: '10px', marginBottom: '10px' }}>\r\n                                    {/* Stars Row */}\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '2px', marginBottom: review.review ? '8px' : '0' }}>\r\n                                        {[...Array(5)].map((_, i) => {\r\n                                            const ratingValue = i + 1;\r\n                                            return (\r\n                                                <span key={i}>\r\n                                                    {review.rating >= ratingValue ? (\r\n                                                        <MdStar size={18} color=\"#FFCC00\" />\r\n                                                    ) : review.rating >= ratingValue - 0.5 ? (\r\n                                                        <MdStarHalf size={18} color=\"#FFCC00\" />\r\n                                                    ) : (\r\n                                                        <MdStar size={18} color=\"#444\" />\r\n                                                    )}\r\n                                                </span>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n\r\n                                    {/* Review Text (Only if present) */}\r\n                                    {review.review && (\r\n                                        <p style={{\r\n                                            color: '#e0e0e0',\r\n                                            fontSize: '0.95rem',\r\n                                            lineHeight: '1.5',\r\n                                            margin: '0',\r\n                                            fontFamily: 'Segoe UI, Helvetica, Arial, sans-serif',\r\n                                            fontWeight: '500' // Rich text feel\r\n                                        }}>\r\n                                            {review.review}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Actions (Only for 'Seriee' / Internal reviews) */}\r\n                                {review.source === 'app' && (\r\n                                    <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '15px', borderTop: '1px solid #333', paddingTop: '10px', marginTop: '10px', alignItems: 'center' }}>\r\n\r\n\r\n\r\n                                        {/* Edit Button */}\r\n                                        {currentUser && review.userId === currentUser.uid && (\r\n                                            <button\r\n                                                onClick={() => onEdit && onEdit(review)}\r\n                                                style={{ background: 'transparent', border: 'none', color: '#aaa', cursor: 'pointer' }}\r\n                                                title=\"Edit\"\r\n                                            >\r\n                                                <MdEdit size={18} />\r\n                                            </button>\r\n                                        )}\r\n\r\n                                        {/* Share Button */}\r\n                                        {currentUser && review.userId === currentUser.uid && (\r\n                                            <button\r\n                                                onClick={() => onShare(review)}\r\n                                                style={{ background: 'transparent', border: 'none', color: '#aaa', cursor: 'pointer' }}\r\n                                                title=\"Share\"\r\n                                            >\r\n                                                <MdShare size={18} />\r\n                                            </button>\r\n                                        )}\r\n\r\n                                        {/* Delete Button */}\r\n                                        {currentUser && review.userId === currentUser.uid && (\r\n                                            <button\r\n                                                onClick={() => handleDelete(review.id)}\r\n                                                style={{ background: 'transparent', border: 'none', color: '#ce2b2b', cursor: 'pointer' }}\r\n                                                title=\"Delete\"\r\n                                            >\r\n                                                <MdDelete size={18} />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReviewsDrawer;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\ShareModal.jsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useNotification\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":17,"column":23,"nodeType":"Identifier","endLine":17,"endColumn":38}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { MdClose, MdFileDownload, MdContentCopy, MdOpenInNew } from 'react-icons/md';\r\nimport { useNotification } from '../context/NotificationContext';\r\n\r\nconst ShareModal = ({ isOpen, onClose, imageUrl }) => {\r\n    if (!isOpen) return null;\r\n\r\n    const handleSave = () => {\r\n        const link = document.createElement('a');\r\n        link.href = imageUrl;\r\n        link.download = `Letterboard_Story_${Date.now()}.png`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    };\r\n\r\n    const { alert } = useNotification();\r\n\r\n    const handleCopy = async () => {\r\n        try {\r\n            const response = await fetch(imageUrl);\r\n            const blob = await response.blob();\r\n            await navigator.clipboard.write([\r\n                new ClipboardItem({\r\n                    [blob.type]: blob\r\n                })\r\n            ]);\r\n            await alert('Image copied to clipboard!', 'Success');\r\n        } catch (err) {\r\n            console.error('Failed to copy image:', err);\r\n            await alert('Failed to copy image to clipboard.', 'Error');\r\n        }\r\n    };\r\n\r\n    const handleOpenInstagram = () => {\r\n        window.open('https://www.instagram.com', '_blank');\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.85)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 10000,\r\n            backdropFilter: 'blur(5px)'\r\n        }}>\r\n            <div style={{\r\n                background: '#1a1a1a',\r\n                borderRadius: '16px',\r\n                padding: '24px',\r\n                width: '90%',\r\n                maxWidth: '400px',\r\n                border: '1px solid #333',\r\n                position: 'relative',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: '20px'\r\n            }}>\r\n                <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '16px',\r\n                        right: '16px',\r\n                        background: 'transparent',\r\n                        border: 'none',\r\n                        color: '#666',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    <MdClose size={24} />\r\n                </button>\r\n\r\n                <div style={{ textAlign: 'center' }}>\r\n                    <h3 style={{ color: 'white', marginBottom: '8px', fontSize: '1.2rem' }}>Share to Instagram</h3>\r\n                    <p style={{ color: '#aaa', fontSize: '0.9rem', lineHeight: '1.4' }}>\r\n                        We've generated your story card! Since we can't open the app directly, please save the image and post it manually.\r\n                    </p>\r\n                </div>\r\n\r\n                <div style={{\r\n                    width: '100%',\r\n                    height: '200px',\r\n                    background: '#000',\r\n                    borderRadius: '8px',\r\n                    overflow: 'hidden',\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <img\r\n                        src={imageUrl}\r\n                        alt=\"Preview\"\r\n                        style={{ height: '100%', width: 'auto', objectFit: 'contain' }}\r\n                    />\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                    <button\r\n                        onClick={handleSave}\r\n                        style={{\r\n                            background: '#FFCC00',\r\n                            color: 'black',\r\n                            border: 'none',\r\n                            padding: '12px',\r\n                            borderRadius: '8px',\r\n                            fontWeight: 'bold',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '8px'\r\n                        }}\r\n                    >\r\n                        <MdFileDownload size={20} /> Save Image\r\n                    </button>\r\n\r\n                    <div style={{ display: 'flex', gap: '12px' }}>\r\n                        <button\r\n                            onClick={handleCopy}\r\n                            style={{\r\n                                flex: 1,\r\n                                background: '#333',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                padding: '12px',\r\n                                borderRadius: '8px',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '8px',\r\n                                fontSize: '0.9rem'\r\n                            }}\r\n                        >\r\n                            <MdContentCopy size={18} /> Copy\r\n                        </button>\r\n                        <button\r\n                            onClick={handleOpenInstagram}\r\n                            style={{\r\n                                flex: 1,\r\n                                background: '#333',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                padding: '12px',\r\n                                borderRadius: '8px',\r\n                                fontWeight: 'bold',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                gap: '8px',\r\n                                fontSize: '0.9rem'\r\n                            }}\r\n                        >\r\n                            <MdOpenInNew size={18} /> Open Insta\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShareModal;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\Sidebar.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onLogout' is defined but never used.","line":9,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"onLogout"},"fix":{"range":[342,354],"text":""},"desc":"Remove unused variable 'onLogout'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { MdHome, MdStarBorder, MdAdd, MdPublic, MdPeople, MdInsertChart } from 'react-icons/md';\r\nimport { CgProfile } from 'react-icons/cg';\r\nimport { IoSettingsOutline } from 'react-icons/io5';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\nimport MobileIndicator from './MobileIndicator';\r\nimport '../pages/Home.css';\r\n\r\nconst Sidebar = ({ onLogout }) => {\r\n    return (\r\n        <aside className=\"left-sidebar\">\r\n            <nav className=\"sidebar-nav\">\r\n                <NavLink\r\n                    to=\"/\"\r\n                    className={({ isActive }) => `sidebar-link ${isActive ? 'active' : ''}`}\r\n                    style={({ isActive }) => ({ color: isActive ? 'var(--accent-color)' : 'var(--text-muted)', textDecoration: 'none' })}\r\n                >\r\n                    <MdHome size={28} />\r\n                    <span className=\"sidebar-text\">Home</span>\r\n                    <MobileIndicator id=\"nav-home-tip\" message=\"Your series feed 🏠\" position=\"top\" />\r\n                </NavLink>\r\n                <NavLink\r\n                    to=\"/series-graph\"\r\n                    className={({ isActive }) => `sidebar-link ${isActive ? 'active' : ''}`}\r\n                    style={({ isActive }) => ({ color: isActive ? 'var(--accent-color)' : 'var(--text-muted)', textDecoration: 'none' })}\r\n                >\r\n                    <MdInsertChart size={28} />\r\n                    <span className=\"sidebar-text\">Series Graph</span>\r\n                    <MobileIndicator id=\"nav-stats-tip\" message=\"Your watch insights 📊\" position=\"top\" />\r\n                </NavLink>\r\n\r\n                <NavLink\r\n                    to=\"/reviews\"\r\n                    className={({ isActive }) => `sidebar-link ${isActive ? 'active' : ''}`}\r\n                    style={({ isActive }) => ({ color: isActive ? 'var(--accent-color)' : 'var(--text-muted)', textDecoration: 'none' })}\r\n                >\r\n                    <MdStarBorder size={28} />\r\n                    <span className=\"sidebar-text\">Reviews</span>\r\n                    <MobileIndicator id=\"nav-reviews-tip\" message=\"Your reviews live here ✍️\" position=\"top\" />\r\n                </NavLink>\r\n                <NavLink\r\n                    to=\"/watchlist\"\r\n                    className={({ isActive }) => `sidebar-link watchlist-link ${isActive ? 'active' : ''}`}\r\n                    style={({ isActive }) => ({ color: isActive ? 'var(--accent-color)' : 'var(--text-muted)', textDecoration: 'none' })}\r\n                >\r\n                    <MdAdd size={28} />\r\n                    <span className=\"sidebar-text\">Watchlist</span>\r\n                </NavLink>\r\n                <NavLink\r\n                    to=\"/profile\"\r\n                    className={({ isActive }) => `sidebar-link ${isActive ? 'active' : ''}`}\r\n                    style={({ isActive }) => ({ color: isActive ? 'var(--accent-color)' : 'var(--text-muted)', textDecoration: 'none' })}\r\n                >\r\n                    <CgProfile size={28} />\r\n                    <span className=\"sidebar-text\">Profile</span>\r\n                    <MobileIndicator id=\"nav-profile-tip\" message=\"Your space 👤\" position=\"top\" />\r\n                </NavLink>\r\n\r\n                <NavLink\r\n                    to=\"/friends\"\r\n                    className={({ isActive }) => `sidebar-link ${isActive ? 'active' : ''}`}\r\n                    style={({ isActive }) => ({ color: isActive ? 'var(--accent-color)' : 'var(--text-muted)', textDecoration: 'none' })}\r\n                >\r\n                    <MdPeople size={28} />\r\n                    <span className=\"sidebar-text\">Friends</span>\r\n                </NavLink>\r\n            </nav>\r\n        </aside>\r\n    );\r\n};\r\n\r\nexport default Sidebar;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\SignIn.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\SignUp.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useNavigate' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"useNavigate"},"fix":{"range":[34,81],"text":""},"desc":"Remove unused variable 'useNavigate'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { FaEye, FaEyeSlash } from 'react-icons/fa';\n\nconst SignUp = ({ onToggle, onSuccess }) => {\n  const { signup, checkUsernameAvailability } = useAuth();\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n    password: '',\n    dob: ''\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [passwordStrength, setPasswordStrength] = useState({ level: 'Weak', color: '#ff4444' });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    if (e.target.name === 'password') {\n      checkStrength(e.target.value);\n    }\n    setError('');\n  };\n\n  const checkStrength = (pass) => {\n    let score = 0;\n    if (pass.length > 6) score++;\n    if (pass.length > 10) score++;\n    if (/[A-Z]/.test(pass)) score++;\n    if (/[0-9]/.test(pass)) score++;\n    if (/[^A-Za-z0-9]/.test(pass)) score++;\n\n    // Sequence check (Simple)\n    if (pass.includes('123') || pass.includes('abc') || pass.includes('qwerty')) score -= 2;\n\n    let level = 'Weak';\n    let color = '#ff4444'; // Red\n\n    if (score > 3) {\n      level = 'Moderate';\n      color = '#FFCC00'; // Yellow\n    }\n    if (score >= 5) {\n      level = 'Strong';\n      color = '#00cc33'; // Green\n    }\n\n    if (pass.length < 1) {\n      level = '';\n      color = 'transparent';\n    }\n\n    setPasswordStrength({ level, color });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!formData.username || !formData.email || !formData.password || !formData.dob) {\n      setError('All fields are required');\n      return;\n    }\n\n    const age = new Date().getFullYear() - new Date(formData.dob).getFullYear();\n    if (age < 15) {\n      setError('You must be at least 15 years old to create an account');\n      return;\n    }\n\n    // Basic validation\n    if (formData.password.length < 6) {\n      return setError('Password must be at least 6 characters');\n    }\n\n    try {\n      setError('');\n      setLoading(true);\n\n      // Unique Username Check\n      const isAvailable = await checkUsernameAvailability(formData.username);\n      if (!isAvailable) {\n        setLoading(false);\n        return setError('Username is already taken');\n      }\n\n      await signup(formData.email, formData.password, { dob: formData.dob, username: formData.username });\n      onSuccess('Account created successfully! Please sign in to continue.');\n    } catch (err) {\n      console.error(err);\n      setError('Failed to create an account. ' + err.message);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"auth-form\">\n      <h1 className=\"login-title\">Sign Up</h1>\n\n      {error && <p className=\"error-message\">{error}</p>}\n\n      <div className=\"form-group\">\n        <label>Username</label>\n        <input\n          type=\"text\"\n          name=\"username\"\n          value={formData.username}\n          onChange={handleChange}\n          required\n          className=\"input-field\"\n          placeholder=\"Choose a username\"\n          autoComplete=\"username\"\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Email</label>\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n          className=\"input-field\"\n          placeholder=\"Enter your email\"\n          autoComplete=\"email\"\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Password</label>\n        <div style={{ position: 'relative' }}>\n          <input\n            type={showPassword ? \"text\" : \"password\"}\n            name=\"password\"\n            value={formData.password}\n            onChange={handleChange}\n            required\n            className=\"input-field\"\n            placeholder=\"Create a password\"\n            style={{ width: '100%', paddingRight: '40px' }}\n            autoComplete=\"new-password\"\n          />\n          <button\n            type=\"button\"\n            onClick={() => setShowPassword(!showPassword)}\n            style={{\n              position: 'absolute', right: '10px', top: '50%', transform: 'translateY(-50%)',\n              background: 'none', border: 'none', color: '#888', cursor: 'pointer'\n            }}\n          >\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\n          </button>\n        </div>\n        {formData.password && (\n          <div style={{ marginTop: '5px', fontSize: '0.8rem', display: 'flex', alignItems: 'center', gap: '10px' }}>\n            <span>Strength:</span>\n            <div style={{\n              padding: '2px 8px', borderRadius: '4px',\n              background: passwordStrength.color, color: '#000', fontWeight: 'bold'\n            }}>\n              {passwordStrength.level}\n            </div>\n          </div>\n        )}\n      </div>\n\n      <div className=\"form-group\">\n        <label>Date of Birth</label>\n        <input\n          type=\"date\"\n          name=\"dob\"\n          placeholder=\"Date of Birth\"\n          className=\"input-field\"\n          value={formData.dob}\n          onChange={handleChange}\n          max={new Date().toISOString().split('T')[0]}\n        />\n      </div>\n\n      <button type=\"submit\" className=\"submit-button\" disabled={loading}>\n        {loading ? 'Creating Account...' : 'Create Account'}\n      </button>\n\n      <div className=\"divider\"></div>\n\n      <p className=\"toggle-text\">\n        Already have an account?{' '}\n        <span className=\"toggle-link\" onClick={() => onToggle('signin')}>\n          Sign In\n        </span>\n      </p>\n    </form>\n  );\n};\n\nexport default SignUp;\n","usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\StarBadger.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\StorySticker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\mernstack_internship\\letterboard\\client\\src\\components\\StreakActionModal.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n   7 |\n   8 |     useEffect(() => {\n>  9 |         setAnimate(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  10 |     }, []);\n  11 |\n  12 |     // Rewards Configuration","line":9,"column":9,"nodeType":null,"endLine":9,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { MdClose, MdCheck, MdLock, MdLocalFireDepartment } from 'react-icons/md';\r\nimport './StreakActionModal.css';\r\n\r\nconst StreakActionModal = ({ streak = 0, onClose }) => {\r\n    const [animate, setAnimate] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setAnimate(true);\r\n    }, []);\r\n\r\n    // Rewards Configuration\r\n    const rewards = [\r\n        { days: 3, label: 'Poster Unlocked', type: 'poster' },\r\n        { days: 7, label: 'Premium Poster', type: 'premium' },\r\n        { days: 15, label: 'Exclusive Artwork', type: 'art' },\r\n        { days: 30, label: 'Rare Poster', type: 'rare' }\r\n    ];\r\n\r\n    // Find next goal\r\n    const nextGoal = rewards.find(r => r.days > streak) || rewards[rewards.length - 1];\r\n    const progressPercent = Math.min(100, (streak / nextGoal.days) * 100);\r\n\r\n    return (\r\n        <div className=\"streak-modal-overlay\" onClick={onClose}>\r\n            <div\r\n                className={`streak-modal-content ${animate ? 'slide-up' : ''}`}\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                <button className=\"close-btn\" onClick={onClose}>\r\n                    <MdClose />\r\n                </button>\r\n\r\n                <div className=\"streak-header\">\r\n                    <div className=\"streak-icon-large\">\r\n                        <MdLocalFireDepartment />\r\n                    </div>\r\n                    <h2>{streak} Day Streak</h2>\r\n                    <p>Keep watching. Keep earning.</p>\r\n                </div>\r\n\r\n                <div className=\"streak-progress-section\">\r\n                    <div className=\"progress-info\">\r\n                        <span>Current Progress</span>\r\n                        <span>{streak} / {nextGoal.days} days</span>\r\n                    </div>\r\n                    <div className=\"progress-bar-bg\">\r\n                        <div\r\n                            className=\"progress-bar-fill\"\r\n                            style={{ width: `${progressPercent}%` }}\r\n                        ></div>\r\n                    </div>\r\n                    <p className=\"next-reward-text\">\r\n                        Next reward: <strong>{nextGoal.label}</strong> in {nextGoal.days - streak} days\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"rewards-timeline\">\r\n                    <h3>Rewards Timeline</h3>\r\n                    <div className=\"timeline-list\">\r\n                        {rewards.map((reward, index) => {\r\n                            const isUnlocked = streak >= reward.days;\r\n                            const isNext = reward === nextGoal;\r\n\r\n                            return (\r\n                                <div\r\n                                    key={index}\r\n                                    className={`timeline-item ${isUnlocked ? 'unlocked' : ''} ${isNext ? 'next' : ''}`}\r\n                                >\r\n                                    <div className=\"timeline-marker\">\r\n                                        {isUnlocked ? <MdCheck /> : <MdLock />}\r\n                                    </div>\r\n                                    <div className=\"timeline-content\">\r\n                                        <span className=\"reward-days\">{reward.days} Days</span>\r\n                                        <span className=\"reward-label\">{reward.label}</span>\r\n                                    </div>\r\n                                    {isUnlocked && <div className=\"glow-dot\"></div>}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n\r\n                <button className=\"primary-action-btn\" onClick={onClose}>\r\n                    KEEP IT UP\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StreakActionModal;\r\n","usedDeprecatedRules":[]}]